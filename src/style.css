
/* Light Mode */
:root {
  --frame-width: 900px;
  --frame-padding: 12px;
  --sidebar-w: 260px;
  --gap: 16px;

  --bg: #d9d9d9;
  --ink: #111111;
  --muted: #333333;
  --link: #0000ee;
  --panel: #efefef;
  --panel-strong: #f7f7f7;
  --border: #7a7a7a;

  /* Length of MAIN BOX */
  --mainbox-target-h: 50vh; 
}

/* Dark Mode */
body[data-theme="dark"]{
  --bg:            #141414;  
  --ink:           #eaeaea;  
  --muted:         #b6b6b6;  
  --panel:         #1b1b1b; 
  --panel-strong:  #222222;  
  --border:        #3a3a3a;  
  --link:          #9fb4ff;
}


/*GLOBAL Typography */

* { box-sizing: border-box; }
html { font-size: 16px; }

body {
  margin: 0;
  color: var(--ink);
  background-color: var(--bg);
  position: relative;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.6;
}

/* background repeat background code */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: url("/assets/grid.png");
  background-repeat: repeat;
  background-size: auto;     
  background-position: top left;
  image-rendering: pixelated;
  filter: var(--grid-filter, none);
  pointer-events: none;
  z-index: 0;
}

/* Content sits above the grid overlay */
.page-frame, .page-frame__inner, .layout-two {
  position: relative;
  z-index: 1;
}

/* Grid filter per theme */
body[data-theme="light"] { --grid-filter: none; }
body[data-theme="dark"]  { --grid-filter: invert(1) brightness(0.55) opacity(0.45); }

a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Outer Frame */

.page-frame {
  width: min(var(--frame-width), 92vw);
  margin: 28px auto 40px;
  background: var(--panel-strong);
  border: 2px solid var(--border);
  padding: var(--frame-padding);
}

/* Page column box layout */

/* move main box position */
body.page-center_home .page-frame { margin-top: 80px !important; }

.layout-two {
  width: 100%;
  margin: 0; 
  display: grid;
  grid-template-columns: 200px 1fr; 
  gap: 14px;
  min-height: var(--mainbox-target-h);
  align-items: stretch;
}

.navbox,
.mainbox {
  background: var(--panel);
  border: 1px solid var(--border);
  padding: 12px 14px;
}

.mainbox { min-height: var(--mainbox-target-h); }

.mainbox .title,
.navbox .title {
  font-weight: 800;
  margin: 2px 0 8px 0;
}

.mainbox .post + .post {
  border: 1px solid var(--border);
  padding: 10px 12px;
  margin-bottom: 12px;
}

/* Header */

.header {
  width: min(var(--frame-width), 94vw);
  margin: 16px auto var(--gap) auto;
  background: var(--panel-strong);
  border: 1px solid var(--border);
  box-shadow: none;
}

.header-top {
  display: grid;
  grid-template-columns: 1fr 220px;
  gap: var(--gap);
  padding: 14px;
  align-items: center;
}

.header-title {
  font-weight: 800;
  font-size: var(--logo-size);
  line-height: 1.15;
  white-space: nowrap;
  overflow: visible;
  text-overflow: clip;
  justify-self: center;
  align-self: center;
  text-align: center;
  padding-bottom: 6px;
}

.header-image {
  justify-self: end;
  background: var(--panel-strong);
  border: none;
  box-shadow: none;
  max-width: 220px;
  min-height: 72px;
  display: flex; align-items: center; justify-content: center;
  color: var(--muted);
  padding: 6px 10px;
}

.header-image img {
  display: block; max-width: 100%; max-height: 84px; height: auto; width: auto; object-fit: contain;
}

/* posts */

.post-wrap { width: min(var(--frame-width), 94vw); margin: 16px auto; }

.box .boxtitle.black { background: #000; color: #fff; }

.post-title {
  font-weight: 800;
  font-size: clamp(22px, 4vw, 36px);
  line-height: 1.15;
  margin: 8px 12px 4px 12px;
}

.post-subhead { font-weight: 800; margin: 12px 12px 0 12px; }
.post-body    { padding: 8px 12px 14px 12px; }
.post-topbar  { width: min(var(--frame-width), 94vw); margin: 8px auto 0 auto; }

/* Tabs (kept) */
.tabbar { display:flex; gap:0; padding:0; margin:0; border-top: 1px solid var(--border); }
.tab    { display:inline-flex; align-items:center; justify-content:center; padding: 8px 14px; height: 36px; font-weight: 800; color: var(--ink); background: transparent; border-right: 1px solid var(--border); cursor: pointer; white-space: nowrap; user-select: none; }
.tab:last-child { border-right: none; }
.tab:hover { background:#000; color:#fff; }
.tab.active { background:#000; color:#fff; }

/* Old frame helpers (kept for compatibility) */
.frame { width: min(var(--frame-width), 94vw); margin: 0 auto 56px auto; display: grid; grid-template-columns: 1fr var(--sidebar-w); gap: var(--gap); }

/* Generic box */
.box { background: var(--panel); border: 1px solid var(--border); box-shadow: none; }
.boxtitle { padding: 10px 12px; font-weight: 800; }
.divide { border-top: 1px solid var(--border); }
.boxbody { padding: 14px 16px; }

.content { display: grid; gap: var(--gap); }

/* Sidebar bits */
.sidebar { display: grid; gap: var(--sidebar-gap); }
.sidebar .boxtitle { padding: 8px 10px; text-align: left; }
.sidebar .boxbody  { padding: 10px 12px; }

.side-links { list-style: none; margin: 0; padding: 0; display: grid; grid-template-columns: 1fr 1fr; gap: 8px 14px; }

.clock { font-variant-numeric: tabular-nums; font-weight: 800; font-size: 16px; display: flex; align-items: center; justify-content: center; }
.theme-select { width: 100%; padding: 6px 8px; border: 1px solid var(--border); background: var(--panel-strong); color: var(--ink); }

/* BLOG page */
body.no-window-scroll { overflow: hidden; }
.blog-wrap { width: min(var(--frame-width), 94vw); margin: 0 auto; display: grid; grid-template-columns: 300px 1fr; gap: var(--gap); height: calc(100vh - 24px); }
.blog-left { position: sticky; top: 0; align-self: start; height: fit-content; }
.blog-right { height: 100%; overflow: auto; padding-right: 2px; }
.post { background: var(--panel); border: 1px solid var(--border); box-shadow: none; margin-bottom: var(--gap); }
.post .post-head { display: flex; justify-content: space-between; align-items: center; background: var(--panel-strong); padding: 8px 10px; border-bottom: 1px solid var(--border); font-weight: 600; }
.post .post-body { padding: 10px 12px; }
.post .more { text-align: right; font-weight: 700; padding: 0 10px 8px; }
.backbtn { display: inline-block; background: #000; color: #fff; padding: 4px 8px; border: 1px solid var(--border); text-decoration: none; }

/* Center header + page frame vertically on simple pages */
body.page-center { min-height: 50vh; display: flex; flex-direction: column; justify-content: center; }
body.page-center .frame { margin-top: 0; margin-bottom: 0; }

/* About page tweaks */
body.about-compact .blog-wrap { height: auto; }
body.about-compact .blog-right { height: auto; overflow: visible; }

/* About Me / Blog positioning section */

.about-wrap,
.blog-full { position: relative; }

:root { --backbtn-shift: 125px; }

.about-wrap  .backbtn-outside,
.blog-full   .backbtn-outside{
  position: absolute;
  top:  calc(-14px - var(--frame-padding));
  left: calc(-14px - var(--backbtn-shift));
  z-index: 3;
}

.mainbox > .backbtn-outside { position: static !important; top: auto !important; left: auto !important; }
@media (max-width: 900px){
  .about-wrap .backbtn-outside,
  .blog-full  .backbtn-outside{ left: -14px; }
}

.toolbar{ display:flex; justify-content:flex-end; align-items:center; gap:8px; margin:8px 0 12px; }
.tabpanel{ display:none; }
.tabpanel.active{ display:block; }
.post-list .postitem + .postitem{ margin-top: 12px; }

/* Gallery grid */
.gallery-grid{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
}
.gallery-grid a{
  display:block;
  background: var(--panel);
  border: 1px solid var(--border);
  padding: 6px;
}
.gallery-grid img{
  display:block;
  width:100%;
  height:auto;
}

.blog-full .mainbox { position: relative; }
.blog-full .tabbar { border-top: none !important; }
.blog-full .tabbar{

  margin-top: -12px !important;
  margin-left: -14px !important;
  margin-right: -14px !important; 
}

.blog-full .tabbar .tab{
  border-top: none !important;    
}
.blog-full .tabbar .tab:last-child{
  border-right: 1px solid var(--border) !important;
  box-shadow: inset -1px 0 0 var(--border);
}
.blog-full .toolbar #sortSelect{
  width: auto !important;
  min-width: 88px;
  padding-inline: 8px;
}

/* ===== Single post page (flat, one big box) ===== */

.post-wrap { width: min(var(--frame-width), 94vw); margin: 0 auto; }
/* ===== Standalone post layout (no base.njk frame) ===== */

/* Push the whole post block 150px down */
.post-solo{
  position: relative;
  width: min(var(--frame-width), 94vw);
  margin: 150px auto 0 auto;       /* <-- 150px down */
}

/* Buttons sit just above the post box */
.post-backrow{
  position: absolute;
  top: -42px;                       /* tweak to taste */
  left: 0;
  display: flex;
  gap: 8px;
  z-index: 3;
}
.post-backrow .backbtn{
  display: inline-block;
  background: #000;
  color: #fff;
  padding: 4px 10px;
  border: 1px solid var(--border);
  text-decoration: none;
}

/* Narrower, fixed-height post; its content gets a scrollbar */
.post-single{
  width: min(720px, 90%);           /* narrower than the page */
  height: 64vh;                     /* fixed height; adjust if needed */
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  overflow: hidden;                 /* keep the box fixed */
}

/* Title / date — flat (no divider) */
.post-single .post-title{
  font-weight: 800;
  font-size: clamp(24px, 3.2vw, 34px);
  line-height: 1.15;
  margin: 2px 0 2px;
}
.post-single .post-meta{
  margin: 0 0 10px;
  font-weight: 700;
  color: var(--muted);
}

/* Inner scroller */
.post-single .post-scroll{
  flex: 1 1 auto;
  overflow: auto;
  padding-right: 6px;               /* room for scrollbar */
}

/* Prevent the window from scrolling on this layout */
body.no-window-scroll{ overflow: hidden; }

/* ========= Post base (base_post.njk) ========= */

/* the main frame must anchor absolute children */
.page-frame { position: relative; }

/* Buttons above the boxes, touching the top inner edge of the frame */
.post-topbar{
  position: absolute;
  /* pull up by the frame padding so it hugs the frame’s top border */
  top: calc(-1 * var(--frame-padding, 14px));
  left: 0;
  display: flex;
  gap: 8px;
  z-index: 5;
}

/* lock window scroll for posts (only the post content scrolls) */
body.post-lock { overflow: hidden; }

/* ========= Post content box ========= */

/* narrow, fixed-height post; inner content scrolls */
.post-single{
  width: min(720px, 90%);       /* narrower than the frame */
  margin: 150px auto 0;         /* move content ~150px down */
  height: 64vh;                 /* fixed height; adjust if you like */
  display: flex;
  flex-direction: column;
  overflow: hidden;             /* keep the box fixed */
}

/* title & date (flat – no divider) */
.post-title{
  font-weight: 800;
  font-size: clamp(24px, 3.2vw, 34px);
  line-height: 1.15;
  margin: 2px 0 2px;
}
.post-meta{
  margin: 0 0 10px;
  font-weight: 700;
  color: var(--muted);
}

/* the scroller inside the box */
.post-scroll{
  flex: 1 1 auto;
  overflow: auto;               /* independent scrolling */
  padding-right: 6px;           /* room for scrollbar */
}
/* ===== Single post pages (no big outer frame) ===== */

/* lock window scroll so only the post scrolls (can remove if undesired) */
body.post-lock { overflow: hidden; }

/* container centered on the page */
.post-solo{
  width: min(var(--frame-width, 980px), 94vw);
  margin: 80px auto 0;      /* push the whole thing down from the very top */
}

/* post box is narrower and its content scrolls */
.post-single{
  position: relative;
  width: min(760px, 92%);
  height: 64vh;             /* fixed height; content gets its own scrollbar */
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  overflow: hidden;         /* keep the box fixed while .post-scroll scrolls */
}

/* tabs that sit on the top-left edge of the post box */
.post-single .post-tabs{
  position: absolute;
  top: -12px;               /* pull into the mainbox padding so it “touches” */
  left: -14px;
  display: flex;
  gap: 6px;
  z-index: 3;
}
.post-single .post-tabs .tab{
  display:inline-block;
  padding: 2px 10px;
  background: var(--panel-strong);
  border: 1px solid var(--border);
  text-decoration: none;
  font-weight: 700;
  color: var(--ink);
}

/* title/date with no divider */
.post-title{
  font-weight: 800;
  font-size: clamp(24px, 3.2vw, 34px);
  line-height: 1.15;
  margin: 2px 0 2px;
}
.post-meta{
  margin: 0 0 10px;
  font-weight: 700;
  color: var(--muted);
}

/* inner scroller */
.post-scroll{
  flex: 1 1 auto;
  overflow: auto;
  padding-right: 6px; /* room for scrollbar */
}
.post-solo{ position: relative; }            /* anchor absolute children */

.post-topbtns{
  position: absolute;
  top: -40px; /* keep above the box; tweak if needed */
  left: calc((100% - min(760px, 92%)) / 1.66 - 14px); /* align to .post-single left */
  right: auto !important; 
  display: flex;
  gap: 8px;
  z-index: 5;
}

.post-topbtns .backbtn{
  display: inline-block;
  background: #000;
  color: #fff;
  padding: 4px 10px;
  border: 1px solid var(--border);
  text-decoration: none;
  font-weight: 700;
}